<!-- Nav bar(Header) -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <img class="logo" src="../../assets/logo.png" alt="Socialytics"><a id="name" class="navbar-brand justify-content-around" href="/home"> Socialytics</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
      <ul class="nav">
        <li  class="nav-item">
          <a class="nav-link active" href="/home">Home</a>
        </li>
        <li  class="nav-item">
          <a class="nav-link active" href="/prediction">Prediction</a>
        </li>
        <li  class="nav-item">
          <a class="nav-link active" href="/recommendation">Recommendation</a>
        </li>
        <li class="nav-item dropdown">
          <a *ngFor="let user of current" class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Welcome, {{user.name}}<span class="sr-only"> </span>
          </a>
          <div class="dropdown-menu " aria-labelledby="navbarDropdown">
            <a class="nav-link list down" [routerLink]="['/userprofile']"> Profile <span class="sr-only"></span></a>
            <a class="nav-link list down" (click)="logout()" href=""> Log out <span class="sr-only">(current)</span></a>
          </div>
        </li>
      </ul>
  </div>
</nav>

<!-- Instagram Basic Info bakerianathaly@gmail.com -->
<div  class="container-fluid" >
  <div class="container">
    <!-- Basic user info -->
    <div *ngIf="this.instagramData" class="row w-100">
      <div class="col-2 d-flex align-items-center justify-content-center">
        <img class="avatar" [src]="instagramData.profile_picture_url" />
      </div>
      <div class="col-8 col-xs-6 card-body">
        <div class="name">
          {{instagramData.name}}
        </div>
        <div>
          <a class="username" [href]="'https://instagram.com/'  + instagramData.username"
            target="_blank">@{{instagramData.username}}</a>
        </div>
        <div class="bio">
          {{instagramData.biography}}
        </div>
        <div class="website">
          <a (click)="externalUrl(stats.website)" target="_blank">{{instagramData.website}}</a>
        </div>
        <small style="font-size: 10px">All graphics are based on your last 25 pictures and 30 days of historical data.</small>
      </div>
    </div>

    <!-- Post, Followers and Following squares-->
    <div *ngIf="this.instagramData && this.instagramMedia" [style.margin-top.px]="'20'" class="row">
      <div class="col-2">
        <div class="card mb-4 box-shadow">
          <div class="card-body text-center">
            <small class="score-header">Posts</small>
            <h4 class="card-text score-body">{{instagramData.media_count}}</h4>
          </div>
        </div>
      </div>

      <div class="col-2">
        <div class="card mb-4 box-shadow">
          <div class="card-body text-center">
            <small class="score-header">Followers</small>
            <h4 class="card-text score-body">{{instagramData.followers_count}}</h4>
          </div>
        </div>
      </div>

      <div class="col-2">
        <div class="card mb-4 box-shadow">
          <div class="card-body text-center">
            <small class="score-header">Following</small>
            <h4 class="card-text score-body">{{instagramData.follows_count}}</h4>
          </div>
        </div>
      </div>

      <div class="col-2">
        <div class="card mb-4 box-shadow">
          <div class="card-body text-center">
            <small class="score-header">Total Likes</small>
            <h4 class="card-text score-body">{{instagramMedia.totalLikes}}</h4>
          </div>
        </div>
      </div>

      <div class="col-2">
        <div class="card mb-4 box-shadow">
          <div class="card-body text-center">
            <small class="score-header">Total Comments</small>
            <h4 class="card-text score-body">{{instagramMedia.totalComments}}</h4>
          </div>
        </div>
      </div>

      <div class="col-2">
        <div class="card mb-4 box-shadow">
          <div class="card-body text-center">
            <small class="score-header">Engagements</small>
            <h4 class="card-text score-body" >{{instagramMedia.totalEngagement}}</h4>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Follower growth count graphics -->
<div class="container" id="changeFollowers" *ngIf = "this.changeFollowers && this.instagramData">
  <h4 class="mt-2">Follower growth count
    <a class="ExportPdf btn bouncy" data-html2canvas-ignore="true" title="Export To PDF" (click)="exportPdf('changeFollowers')"><br>PDF</a>
    <a class="ExportXlsx btn bouncy" data-html2canvas-ignore="true" title="Export To Excel" (click)="exportExcel(ChangeFollowersExcelData)"><br>Excel</a>
    <a class="ExportPPT btn bouncy" data-html2canvas-ignore="true" title="Export To PPTX" (click)="exportPPT('changeFollowers')"><br>PPTX</a> 
  </h4>
  <small style="font-size: 15px">This is your follower change for the past 28 days excluded the current day, grouped in weeks.</small>
  <div class="row" >
    <div class="col-12">
      <div class="card mb-4 box-shadow">
        <div class="card-body text-center" >
          <canvas baseChart [datasets]="followerCountData" [labels]="ChartLabels" [options]="ChartOptions"
            [plugins]="ChartPlugins" [legend]="ChartLegend" [chartType]="barChartType" [colors]="followerCountColor">
          </canvas>
          <small style="font-size: 10px">Follower growth: Total number of unique accounts that follow this profile.</small>
        </div>
      </div>
    </div>
  </div>

  <table class="table text-center table-bordered">
    <thead class="table-dark">
      <tr>
        <th scope="col">Profile name</th>
        <th scope="col">Max change</th>
        <th scope="col">Min change</th>
        <th scope="col">Average change</th>
        <th scope="col">Total change</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">{{instagramData.username}}</th>
        <td>{{changeFollowers.max}}</td>
        <td>{{changeFollowers.min}}</td>
        <td>{{changeFollowers.avg}}</td>
        <td>{{changeFollowers.total}}</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Top 5 of the most engagements post -->
<div class="container" *ngIf = "this.topMediaPost">
  <h4 class="mt-5">Top 5 of your most engagement post</h4>
  <div class="card mb-4 box-shadow ">
    <div class="card-body text-center">
      <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6 ">
          <div class=" mb-4 box-shadow topMediaContainer text-center">
            <img class="image rounded" [src]="topMediaPost[0].mediaInfo.media_url" (click)='getTopInfo(topMediaPost[0])'>
          </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6 ">
          <div class=" mb-4 box-shadow topMediaContainer text-center">
            <img class="image rounded" [src]="topMediaPost[1].mediaInfo.media_url" (click)='getTopInfo(topMediaPost[1])' >
          </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6 ">
          <div class=" mb-4 box-shadow topMediaContainer text-center">
            <img class="image rounded" [src]="topMediaPost[2].mediaInfo.media_url" (click)='getTopInfo(topMediaPost[2])' >
          </div>
        </div>
        
        <div class="col-6 ">
          <div class=" mb-4 box-shadow topMediaContainer text-center">
            <img class="image rounded" [src]="topMediaPost[3].mediaInfo.media_url" (click)='getTopInfo(topMediaPost[3])' >
          </div>
        </div>
        <div class="col-6 ">
          <div class=" mb-4 box-shadow topMediaContainer text-center">
            <img class="image rounded" [src]="topMediaPost[4].mediaInfo.media_url" (click)='getTopInfo(topMediaPost[4])' >
          </div>
        </div>
      </div>
      <small style="font-size: 10px">(Based on your most recent 25 posts)</small>
    </div>
  </div>
</div>

<!-- Frequency post type graphics -->
<div class="container" id="mediaTypeGraph" *ngIf = "this.instagramMedia">
  <h4 class="mt-5">Most frequent post types 
    <a class="ExportPdf btn bouncy" data-html2canvas-ignore="true" title="Export To PDF" (click)="exportPdf('mediaTypeGraph')"><br>PDF</a>
    <a class="ExportXlsx btn bouncy" data-html2canvas-ignore="true" title="Export To Excel" (click)="exportExcel(MediaTypeExcelData)"><br>Excel</a>
    <a class="ExportPPT btn bouncy" data-html2canvas-ignore="true" title="Export To PPTX" (click)="exportPPT('mediaTypeGraph')"><br>PPTX</a> 
  </h4>
  <small style="font-size: 15px">In your last 25 pictures you have been publishing this percent frequency of each type of post.</small>
  <div class="row mt-2" >
    <div class="col-12">
      <div class=" mb-4 box-shadow">
        <div class=" text-center" >
          <canvas baseChart
            [data]="doughnutChartData"
            [labels]="doughnutChartLabels"
            [chartType]="doughnutChartType"
            [colors]="donutColors"
            [options]="doughnutChartOptions">
          </canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- End homepage content -->
<footer *ngIf = "this.instagramMedia">
  <div class="wrapper">
    <p><img src="../../assets/logo.png" alt="logo"> Socialytics</p>
    <p>&copy; All Rights Reserved 2020</p>
    <!-- Esto sale al final de la pagina -->
    <p style="font-size: 12px;">
      *Instagram public endpoints have been changing since April 2018. As a result, the
      application is in continuous development. If the endpoints have changed since the last test run, please bear
      with me and consider creating an issue <a href="https://github.com/preethamvishy/socialytics/issues">here</a>.
    </p>
    <!-- Hasta aqui -->
  </div>
</footer>
  
